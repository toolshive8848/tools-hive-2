<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plagiarism Checker & Rephraser - ToolHive</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #2563EB;
            --secondary-accent: #FBBF24;
            --background-color: #F3F4F6;
            --heading-color: #1F2937;
            --body-text-color: #4B5563;
            --cta-color: #10B981;
            --white-color: #FFFFFF;
            --soft-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --error-bg: #FEE2E2;
            --error-text: #991B1B;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--background-color); color: var(--body-text-color); line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; width: 100%; }

        .site-header { background-color: var(--white-color); padding: 1rem 0; box-shadow: var(--soft-shadow); width: 100%; position: sticky; top: 0; z-index: 1000; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 700; color: var(--primary-color); text-decoration: none; }
        .main-nav a { color: var(--body-text-color); font-weight: 600; text-decoration: none; }

        main { padding: 3rem 0; }
        .checker-wrapper { background-color: var(--white-color); padding: 2.5rem; border-radius: 16px; box-shadow: var(--soft-shadow); }
        .tool-title { text-align: center; margin-bottom: 2rem; }
        .tool-title h1 { font-size: 2.2rem; }
        .tool-title p { font-size: 1.1rem; margin-top: 0.5rem; }

        #text-input { width: 100%; min-height: 250px; padding: 1rem; font-size: 1rem; border-radius: 8px; border: 2px solid #E5E7EB; resize: vertical; }
        .action-bar { display: flex; justify-content: center; gap: 1rem; margin-top: 1.5rem; }
        .action-btn { background-color: var(--primary-color); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 8px; font-weight: 600; font-size: 1rem; cursor: pointer; }
        .action-btn:disabled { background-color: #9CA3AF; cursor: not-allowed; }

        .results-area { margin-top: 2rem; }
        .loader { width: 48px; height: 48px; border: 5px solid var(--primary-color); border-bottom-color: transparent; border-radius: 50%; display: none; margin: 2rem auto; animation: rotation 1s linear infinite; }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        #results-output { border: 1px solid #E5E7EB; padding: 1.5rem; border-radius: 8px; background-color: #F9FAFB; }
        #results-output p { margin: 0; }
        .sentence { cursor: pointer; transition: background-color 0.2s; border-radius: 4px; }
        .sentence.matched { background-color: #FEF3C7; color: #92400E; font-weight: 500; }
        .sentence:hover { background-color: #EBF2FF; }

        #rephrase-modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 600px; border-radius: 12px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #E5E7EB; padding-bottom: 10px; margin-bottom: 15px; }
        .close-btn { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; }
        #suggestions-list { list-style-type: none; }
        #suggestions-list li { padding: 10px; border: 1px solid #E5E7EB; border-radius: 6px; margin-bottom: 10px; cursor: pointer; }
        #suggestions-list li:hover { background-color: #EBF2FF; }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container header-content">
            <a href="index.html" class="logo">ToolHive</a>
            <nav class="main-nav"><a href="index.html#tools">‚Üê Back to All Tools</a></nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="checker-wrapper">
                <div class="tool-title">
                    <h1>üî§ Plagiarism Checker & Rephraser</h1>
                    <p>Paste your text, check for uniqueness, and get help rephrasing sentences.</p>
                </div>

                <textarea id="text-input" placeholder="Paste your text here..."></textarea>
                <div class="action-bar">
                    <button id="check-btn" class="action-btn">Check for Uniqueness</button>
                </div>

                <div class="results-area">
                    <div class="loader" id="loader"></div>
                    <div id="results-output"></div>
                </div>
            </div>
        </div>
        
        <!-- Rephrase Modal -->
        <div id="rephrase-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Rephrasing Suggestions</h3>
                    <span class="close-btn">&times;</span>
                </div>
                <p><strong>Original:</strong> <span id="original-sentence"></span></p>
                <hr style="margin: 15px 0;">
                <ul id="suggestions-list">
                    <!-- Suggestions will be populated here -->
                </ul>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textInput = document.getElementById('text-input');
            const checkBtn = document.getElementById('check-btn');
            const loader = document.getElementById('loader');
            const resultsOutput = document.getElementById('results-output');
            
            const modal = document.getElementById('rephrase-modal');
            const closeModalBtn = document.querySelector('.close-btn');
            const originalSentenceEl = document.getElementById('original-sentence');
            const suggestionsList = document.getElementById('suggestions-list');

            checkBtn.addEventListener('click', async () => {
                const text = textInput.value.trim();
                if (!text) return;

                resultsOutput.innerHTML = '';
                loader.style.display = 'block';
                checkBtn.disabled = true;

                try {
                    // Split text into sentences. A simple regex is used here.
                    const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
                    const results = [];

                    // Check each sentence for uniqueness
                    for (const sentence of sentences) {
                        const isUnique = await checkSentenceUniqueness(sentence);
                        results.push({ text: sentence, unique: isUnique });
                    }
                    
                    displayResults(results);

                } catch (error) {
                    console.error('Error during uniqueness check:', error);
                    resultsOutput.innerHTML = `<p style="color:red;">An error occurred. Please try again later.</p>`;
                } finally {
                    loader.style.display = 'none';
                    checkBtn.disabled = false;
                }
            });

            async function checkSentenceUniqueness(sentence) {
                // This is a simulation. A real implementation would use a search API.
                // We use a proxy to avoid CORS issues if we were to hit a real API.
                // For this demo, we'll randomly flag some sentences.
                // A real API call would look something like:
                // const proxyUrl = `https://api.allorigins.win/raw?url=`;
                // const searchApiUrl = `https://api.googlesearch.com/q="${encodeURIComponent(sentence)}"`;
                // const response = await fetch(proxyUrl + searchApiUrl);
                // const data = await response.json();
                // return data.results.length === 0;
                
                // Demo logic:
                await new Promise(resolve => setTimeout(resolve, 50)); // Simulate network delay
                return Math.random() > 0.7; // Randomly decide if unique (true) or not (false)
            }

            function displayResults(results) {
                const fragment = document.createDocumentFragment();
                results.forEach(result => {
                    const span = document.createElement('span');
                    span.textContent = result.text;
                    span.className = 'sentence';
                    if (!result.unique) {
                        span.classList.add('matched');
                    }
                    span.onclick = () => openRephraseModal(result.text);
                    fragment.appendChild(span);
                    fragment.appendChild(document.createTextNode(' ')); // Add space
                });
                resultsOutput.innerHTML = ''; // Clear previous
                const p = document.createElement('p');
                p.appendChild(fragment);
                resultsOutput.appendChild(p);
            }
            
            // --- Rephrasing Modal Logic ---
            function openRephraseModal(sentence) {
                originalSentenceEl.textContent = sentence;
                suggestionsList.innerHTML = '<li>Loading suggestions...</li>';
                modal.style.display = 'block';
                
                // Simulate fetching rephrasing suggestions
                fetchRephraseSuggestions(sentence);
            }
            
            async function fetchRephraseSuggestions(sentence) {
                // This is a simulation. A real implementation would call a language model API.
                // A real API call would look something like:
                // const response = await fetch('https://api.language-model.com/rephrase', {
                //   method: 'POST',
                //   body: JSON.stringify({ text: sentence })
                // });
                // const suggestions = await response.json();
                
                // Demo logic:
                await new Promise(resolve => setTimeout(resolve, 500));
                const suggestions = [
                    `Suggestion 1: A rephrased version of "${sentence.substring(0, 20)}..."`,
                    `Suggestion 2: An alternative way to say "${sentence.substring(0, 20)}..."`,
                    `Suggestion 3: Another phrasing for "${sentence.substring(0, 20)}..."`,
                ];
                
                suggestionsList.innerHTML = '';
                suggestions.forEach(sugg => {
                    const li = document.createElement('li');
                    li.textContent = sugg;
                    suggestionsList.appendChild(li);
                });
            }

            closeModalBtn.onclick = () => {
                modal.style.display = 'none';
            };

            window.onclick = (event) => {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            };
        });
    </script>
</body>
</html>
